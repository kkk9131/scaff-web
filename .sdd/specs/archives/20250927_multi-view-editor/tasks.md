# 実装タスクリスト

## セクション1：データモデル実装
- [x] 1.1 建物状態の型定義とコンテキスト初期化を行う
  - `BuildingModel` / `FloorModel` / `EdgeDimension` / `RoofConfig` の型を実装し、初期テンプレート生成ロジックを作成
  - 頂点座標・寸法値のバリデーションルール（自己交差チェック、数値範囲）を実装
- [x] 1.2 建物状態の永続化と復元メカニズムを実装する
  - ローカルストレージ（またはIndexedDB）でモデルを保存・復元するユーティリティ
  - 保存／読み込みのエラーハンドリング（整合性チェック）を実装

## セクション2：ビジネスロジック実装
- [x] 2.1 BuildingProviderのReducerとアクションを実装する
  - テンプレート選択、頂点操作、寸法更新、階層操作に対応
  - 処理フロー1と2に対応し、ポリゴンと寸法再計算を行う
- [x] 2.2 立面・3Dビュー生成ユーティリティを実装する
  - 処理フロー3〜5に対応し、Edgeプロジェクション、寸法線生成、3D屋根メッシュ作成を実装
  - 線画表現用のエッジ抽出・塗りつぶし無効化ロジックを含める
- [x] 2.3 エラーハンドリングロジックを実装する
  - 自己交差や無効寸法の検知で操作取り消し／警告表示を行う
  - 立面・3D生成エラー時のフォールバック処理を実装

## セクション3：インターフェース実装
- [x] 3.1 UIコンポーネントを実装する
  - `PlanViewCanvas`, `DimensionPanel`, `ElevationViews`, `ThreeDView` を線画表現で実装
  - 階層色、壁実線／屋根点線の描画ルールを組み込む
- [x] 3.2 入力フォームとバリデーションを実装する
  - サイドパネルの寸法・屋根・階層入力フォームと範囲チェック
  - エラー時のインラインメッセージ表示と再入力誘導を実装
- [x] 3.3 出力フォーマットと同期UIを実装する
  - ビュー切替、レイヤー表示、SVG/PDF/JPEG出力のトリガーUIを配置
  - ビュー間で線画状態を維持しながら同期更新されることを確認

## セクション4：統合とテスト
- [x] 4.1 コンポーネントを統合する
  - BuildingProviderで全コンポーネントをラップし、データフローを接続
  - 保存・復元ロジックとUIイベントを結合
- [x] 4.2 基本的な動作テストを実装する
  - Reducerのユニットテスト、幾何ユーティリティのテストを追加
  - 主要コンポーネントの描画とアクションを統合テストまたはStorybookで確認
- [x] 4.3 受入基準の確認を行う
  - タスクチェックリストを使い、要件ごとの受入基準を手動／自動テストで検証
  - 線画要件（塗りなし輪郭）を各ビューで確認
