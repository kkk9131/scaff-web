# 要件定義書

## 機能概要
建物平面図エディタでテンプレート追加と自由頂点編集を拡張し、辺単位の状態把握と軒の出作図、作図支援モードを提供して足場計画時の形状作成を高速化する。

## ユーザーストーリー
- 足場計画担当者として、現場形状に合わせた平面図を短時間で整えたい。なぜなら事前調整や図面出力の手戻りを減らしたいから。

## 機能要件
### 要件1：テンプレートと自由形状編集
- L字型・凹型・凸型のテンプレートを選択するとキャンバス上の建物外形が即座に更新され、そこから自由に頂点追加・削除ができること。
- 受入基準：
  - [ ] 各テンプレート選択時に既存の図形が指定テンプレート形状に置き換わること
  - [ ] 任意の辺上に頂点を追加でき、不要な頂点を削除しても形状が破綻しないこと
  - [ ] 編集後の頂点列がサイドバーの寸法情報と同期して表示されること

### 要件2：辺編集と軒の出管理
- サイドバーで選択した辺がキャンバス上でハイライトされ、辺ごとに軒の出オフセットを設定できるようにする。
- 受入基準：
  - [ ] サイドバーの辺リストで選択中の項目がキャンバス上の該当辺と視覚的にリンクされること
  - [ ] 「軒の出」ボタン操作で全辺から外側500mmの点線オフセットが生成されること
  - [ ] 各辺の軒の出オフセット値を個別に0mm以上で編集でき、変更が即座に点線に反映されること

### 要件3：作図支援モード
- 直角モード・グリッド表示切り替え・階層ごとの編集ロックを提供し、誤操作を抑制する。
- 受入基準：
  - [ ] 直角モードON時は頂点移動や追加が直角制約を満たす方向にスナップされること
  - [ ] グリッド表示をON/OFFでき、グリッドON時は頂点がグリッドにスナップすること
  - [ ] 各階層を編集ロックすると当該階層の頂点・辺が操作不可になりロック状態がUIで識別できること

## 非機能要件
- パフォーマンス：テンプレート切り替えやモード変更の反応が500ms以内で完了し、描画が60fpsを下回らないことを目標とする。
- セキュリティ：PoC段階のためクライアント内完結とし、外部送信や永続保存を行わない。
