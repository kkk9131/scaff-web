# 要件定義書

## 機能概要
平面図エディタに足場計画で頻出するテンプレート図形と補助機能を拡張し、形状編集と寸法調整の作業時間を短縮する。

## ユーザーストーリー
- ユーザーとして、建物外形のテンプレートや補助線を素早く整えて正確な平面図を作成したい。なぜなら足場計画の検討を迅速に完了したいから。

## 機能要件
### 要件1：テンプレートセクションの追加と適用
- 詳細説明：サイドバーに折りたたみ可能なテンプレートセクションを追加し、L字型・凹型・凸型のプレセット形状を選択してキャンバスへ反映できるようにする。
- 受入基準：
  - [ ] サイドバーに折りたたみ可能な「テンプレート」セクションが表示され、初期状態で閉じていること
  - [ ] L字型・凹型・凸型テンプレートが選択肢として表示されること
  - [ ] 任意のテンプレートを選択するとエディタにテンプレート形状が反映され、現在編集中の階層に適用されること

### 要件2：軒の出ラインの視認性改善
- 詳細説明：各階層の軒の出ラインの線色を階層ごとの配色に合わせ、線の端点を辺の延長線の交点まで伸ばして視認性を高める。
- 受入基準：
  - [ ] 各階層の軒の出ラインの線色が階層のテーマカラーと一致すること
  - [ ] 軒の出ラインの角が二辺の延長線交点まで描画され、隙間や欠けがないこと

### 要件3：直角モードとグリッド機能の改善
- 詳細説明：直角モードとグリッドスナップの機能を復旧し、グリッド間隔を100mmに統一して正確な形状編集を支援する。
- 受入基準：
  - [ ] 直角モードを有効化すると辺と頂点が90度に制御されること
  - [ ] グリッド表示が100mmピッチで描画され、表示の切り替えが機能すること
  - [ ] グリッドまたは直角モード有効時に頂点・辺のドラッグが意図した位置へスナップすること

## 非機能要件
- パフォーマンス：テンプレート選択やグリッド描画の操作で目立った再描画遅延がなく、最新の主要ブラウザで円滑に動作すること。
- セキュリティ：テンプレート適用や描画処理はクライアント内で完結し、新たな外部通信や権限を要求しないこと。
