# 要件定義書

## 機能概要
足場計画向け建物形状エディタのPoCとして、ブラウザ上で平面図・立面図・3Dビューを同時に扱いながら建物外形と階層情報を編集できる画面を提供する。テンプレート選択、頂点／寸法編集、階層管理、屋根表示を一元化し、作図結果を各ビューに同期させる。

## ユーザーストーリー
- 足場計画を担当する現場管理者として、現場条件に合わせた建物形状を素早く作図し、各ビューで確認したい。なぜなら足場計画前の合意形成と修正を効率化したいから。

## 機能要件
### 要件1：テンプレート生成と平面編集
- テンプレート形状（矩形・L字・T字・コの字）から平面図を生成し、頂点の追加・削除・ドラッグで自由形状に調整できるキャンバスを提供する。
- 受入基準：
  - [ ] テンプレート選択後に該当形状が平面ビューへ描画されること
  - [ ] 頂点のドラッグで外形が即時更新され、元の頂点順序を保持すること
  - [ ] 辺の操作で頂点を追加・削除でき、無効なポリゴンが生成されないこと
  - [ ] 平面ビューは塗りつぶしなしの線画で建物輪郭を表示すること

### 要件2：寸法・階層管理の双方向同期
- 各辺の寸法や境界距離をサイドパネルから編集し、平面図と数値が双方向で同期する。階層を複製・追加して高さと屋根タイプを設定でき、壁は実線、屋根は点線で表現し階層ごとに線色を変える。
- 受入基準：
  - [ ] サイドパネルで寸法を変更すると平面図の形状が反映されること
  - [ ] キャンバス上で頂点を移動するとサイドパネルの寸法値が更新されること
  - [ ] 階層を追加・削除・複製でき、各階層の高さと屋根タイプが保持されること
  - [ ] 各階層の表示色が明確に区別され、壁が実線／屋根が点線で描画されること

### 要件3：立面・3Dビューの同期表示
- 平面図データから北・南・東・西の立面図と3Dビューを生成し、寸法線（|──6000──|形式）と屋根勾配（10/○表記）を表示する。いずれのビューでも編集結果がリアルタイムで反映される。
- 受入基準：
  - [ ] 平面図の更新が立面図4方向と3Dビューに遅延なく反映されること
  - [ ] 立面図で各階層が積み上げ表示され、寸法線と屋根勾配表記が要件通り表示されること
  - [ ] 立面図と3Dビューはいずれも輪郭線のみの線画表現を維持し、不要な塗りつぶしが入らないこと
  - [ ] 3Dビューで屋根タイプと勾配が正しく反映され、操作のたびに再計算されること

## 非機能要件
- パフォーマンス：PCとタブレットの主要ブラウザで、頂点操作やビュー切替時の再描画が体感遅延なく行えること（おおよそ500ms以内）。
- セキュリティ：PoC段階ではブラウザ内で完結し、外部APIや機密情報を扱わない構成とする。
